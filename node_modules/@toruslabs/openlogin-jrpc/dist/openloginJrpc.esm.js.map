{"version":3,"file":"openloginJrpc.esm.js","sources":["../src/basePostMessageStream.ts","../src/safeEventEmitter.ts","../src/serializableError.ts","../src/jrpc.ts","../src/jrpcEngine.ts","../src/substream.ts","../src/mux.ts","../src/postMessageStream.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["noop","undefined","SYN","ACK","BRK","BasePostMessageStream","Duplex","constructor","name","target","targetWindow","window","targetOrigin","objectMode","Error","_init","_haveSyn","_name","_target","_targetWindow","_targetOrigin","_onMessage","onMessage","bind","_synIntervalId","addEventListener","_handShake","_break","cork","_write","_onData","data","uncork","push","err","emit","_postMessage","originConstraint","postMessage","event","message","origin","source","_read","_","cb","_destroy","removeEventListener","safeApply","handler","context","args","Reflect","apply","setTimeout","arrayClone","arr","n","length","copy","Array","i","SafeEventEmitter","EventEmitter","type","doError","events","_events","error","er","len","listeners","SerializableError","code","Number","isInteger","toString","stringify","stack","getRpcPromiseCallback","resolve","reject","unwrapResult","response","isArray","result","createErrorMiddleware","log","req","res","next","end","method","done","createStreamMiddleware","idMap","readNoop","processResponse","id","Object","assign","processNotification","processMessage","_encoding","isNotification","_err","stream","read","write","middleware","createScaffoldMiddleware","handlers","createIdRemapMiddleware","_end","originalId","newId","randomId","createLoggerMiddleware","logger","debug","createAsyncMiddleware","asyncMiddleware","resolveNextPromise","nextPromise","Promise","returnHandlerCallback","nextWasCalled","asyncNext","runReturnHandlersCallback","JRPCEngine","_middleware","_runAllMiddleware","middlewareStack","returnHandlers","isComplete","_runMiddleware","reverse","serializeError","returnHandler","_runReturnHandlers","_checkForCompletion","handle","_handleBatch","_handle","_promiseHandle","asMiddleware","middlewareError","handlerCallback","reqs","responses","all","map","callerReq","jsonrpc","_processRequest","_error","mergeMiddleware","engine","forEach","createEngineStream","opts","on","Substream","parent","_parent","chunk","callback","IGNORE_SUBSTREAM","Symbol","ObjectMultiplex","_substreams","createStream","substream","anyStreamEnd","destroy","ignoreStream","console","warn","_cb","once","eos","readable","writable","setupMultiplex","mux","getStream","streamHelper","pump","PostMessageStream","dataObj","dataObjData","params","dataObjDataParam","_origin","location"],"mappings":"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"}