{"version":3,"file":"KeypairIdentityDriver.cjs","sources":["../../../../src/plugins/keypairIdentity/KeypairIdentityDriver.ts"],"sourcesContent":["import { Keypair, PublicKey, Transaction } from '@solana/web3.js';\nimport nacl from 'tweetnacl';\nimport { KeypairSigner } from '@/types';\nimport { IdentityDriver } from '../identityModule';\n\nexport class KeypairIdentityDriver implements IdentityDriver, KeypairSigner {\n  public readonly keypair: Keypair;\n  public readonly publicKey: PublicKey;\n  public readonly secretKey: Uint8Array;\n\n  constructor(keypair: Keypair) {\n    this.keypair = keypair;\n    this.publicKey = keypair.publicKey;\n    this.secretKey = keypair.secretKey;\n  }\n\n  public async signMessage(message: Uint8Array): Promise<Uint8Array> {\n    return nacl.sign.detached(message, this.secretKey);\n  }\n\n  public async signTransaction(transaction: Transaction): Promise<Transaction> {\n    transaction.partialSign(this.keypair);\n\n    return transaction;\n  }\n\n  public async signAllTransactions(\n    transactions: Transaction[]\n  ): Promise<Transaction[]> {\n    return Promise.all(\n      transactions.map((transaction) => this.signTransaction(transaction))\n    );\n  }\n}\n"],"names":["KeypairIdentityDriver","constructor","keypair","publicKey","secretKey","signMessage","message","nacl","sign","detached","signTransaction","transaction","partialSign","signAllTransactions","transactions","Promise","all","map"],"mappings":";;;;;;;;;;AAKO,MAAMA,qBAAN,CAAqE;EAK1EC,WAAW,CAACC,OAAD,EAAmB;IAC5B,IAAKA,CAAAA,OAAL,GAAeA,OAAf,CAAA;AACA,IAAA,IAAA,CAAKC,SAAL,GAAiBD,OAAO,CAACC,SAAzB,CAAA;AACA,IAAA,IAAA,CAAKC,SAAL,GAAiBF,OAAO,CAACE,SAAzB,CAAA;AACD,GAAA;;EAEuB,MAAXC,WAAW,CAACC,OAAD,EAA2C;IACjE,OAAOC,wBAAI,CAACC,IAAL,CAAUC,QAAV,CAAmBH,OAAnB,EAA4B,IAAKF,CAAAA,SAAjC,CAAP,CAAA;AACD,GAAA;;EAE2B,MAAfM,eAAe,CAACC,WAAD,EAAiD;AAC3EA,IAAAA,WAAW,CAACC,WAAZ,CAAwB,IAAA,CAAKV,OAA7B,CAAA,CAAA;AAEA,IAAA,OAAOS,WAAP,CAAA;AACD,GAAA;;EAE+B,MAAnBE,mBAAmB,CAC9BC,YAD8B,EAEN;AACxB,IAAA,OAAOC,OAAO,CAACC,GAAR,CACLF,YAAY,CAACG,GAAb,CAAkBN,WAAD,IAAiB,KAAKD,eAAL,CAAqBC,WAArB,CAAlC,CADK,CAAP,CAAA;AAGD,GAAA;;AA3ByE;;;;"}