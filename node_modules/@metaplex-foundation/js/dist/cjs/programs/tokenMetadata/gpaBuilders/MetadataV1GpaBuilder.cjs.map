{"version":3,"file":"MetadataV1GpaBuilder.cjs","sources":["../../../../../src/programs/tokenMetadata/gpaBuilders/MetadataV1GpaBuilder.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { Key } from '@metaplex-foundation/mpl-token-metadata';\nimport { Buffer } from 'buffer';\nimport { Metaplex } from '@/Metaplex';\nimport { padEmptyChars } from '@/utils';\nimport { TokenMetadataGpaBuilder } from './TokenMetadataGpaBuilder';\n\nconst MAX_NAME_LENGTH = 32;\nconst MAX_SYMBOL_LENGTH = 10;\nconst MAX_URI_LENGTH = 200;\nconst MAX_CREATOR_LEN = 32 + 1 + 1;\nconst DATA_START = 1 + 32 + 32;\nconst NAME_START = DATA_START + 4;\nconst SYMBOL_START = NAME_START + MAX_NAME_LENGTH + 4;\nconst URI_START = SYMBOL_START + MAX_SYMBOL_LENGTH + 4;\nconst CREATORS_START = URI_START + MAX_URI_LENGTH + 2 + 1 + 4;\n\nexport class MetadataV1GpaBuilder extends TokenMetadataGpaBuilder {\n  constructor(metaplex: Metaplex, programId?: PublicKey) {\n    super(metaplex, programId);\n    this.whereKey(Key.MetadataV1);\n  }\n\n  selectUpdatedAuthority() {\n    return this.slice(1, 32);\n  }\n\n  whereUpdateAuthority(updateAuthority: PublicKey) {\n    return this.where(1, updateAuthority);\n  }\n\n  selectMint() {\n    return this.slice(33, 32);\n  }\n\n  whereMint(mint: PublicKey) {\n    return this.where(33, mint);\n  }\n\n  selectName() {\n    return this.slice(NAME_START, MAX_NAME_LENGTH);\n  }\n\n  whereName(name: string) {\n    return this.where(\n      NAME_START,\n      Buffer.from(padEmptyChars(name, MAX_NAME_LENGTH))\n    );\n  }\n\n  selectSymbol() {\n    return this.slice(SYMBOL_START, MAX_SYMBOL_LENGTH);\n  }\n\n  whereSymbol(symbol: string) {\n    return this.where(\n      SYMBOL_START,\n      Buffer.from(padEmptyChars(symbol, MAX_SYMBOL_LENGTH))\n    );\n  }\n\n  selectUri() {\n    return this.slice(URI_START, MAX_URI_LENGTH);\n  }\n\n  whereUri(uri: string) {\n    return this.where(\n      URI_START,\n      Buffer.from(padEmptyChars(uri, MAX_URI_LENGTH))\n    );\n  }\n\n  selectCreator(position: number) {\n    return this.slice(\n      CREATORS_START + (position - 1) * MAX_CREATOR_LEN,\n      CREATORS_START + position * MAX_CREATOR_LEN\n    );\n  }\n\n  whereCreator(position: number, creator: PublicKey) {\n    return this.where(\n      CREATORS_START + (position - 1) * MAX_CREATOR_LEN,\n      creator\n    );\n  }\n\n  selectFirstCreator() {\n    return this.selectCreator(1);\n  }\n\n  whereFirstCreator(firstCreator: PublicKey) {\n    return this.whereCreator(1, firstCreator);\n  }\n}\n"],"names":["MAX_NAME_LENGTH","MAX_SYMBOL_LENGTH","MAX_URI_LENGTH","MAX_CREATOR_LEN","DATA_START","NAME_START","SYMBOL_START","URI_START","CREATORS_START","MetadataV1GpaBuilder","TokenMetadataGpaBuilder","constructor","metaplex","programId","whereKey","Key","MetadataV1","selectUpdatedAuthority","slice","whereUpdateAuthority","updateAuthority","where","selectMint","whereMint","mint","selectName","whereName","name","Buffer","from","padEmptyChars","selectSymbol","whereSymbol","symbol","selectUri","whereUri","uri","selectCreator","position","whereCreator","creator","selectFirstCreator","whereFirstCreator","firstCreator"],"mappings":"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"}