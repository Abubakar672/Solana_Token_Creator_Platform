{"version":3,"file":"CandyMachineGpaBuilder.cjs","sources":["../../../../../src/programs/candyMachine/gpaBuilders/CandyMachineGpaBuilder.ts"],"sourcesContent":["import { GpaBuilder } from '@/utils';\nimport { PublicKey } from '@solana/web3.js';\n\ntype AccountDiscriminator = [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number\n];\n// TODO(thlorenz): copied from candy machine SDK\n// SDK should either provide a GPA builder or expose this discriminator\nconst candyMachineDiscriminator: AccountDiscriminator = [\n  51, 173, 177, 113, 25, 241, 109, 189,\n];\n\nconst AUTHORITY = candyMachineDiscriminator.length;\nconst WALLET = AUTHORITY + PublicKey.default.toBytes().byteLength;\n\nexport class CandyMachineGpaBuilder extends GpaBuilder {\n  whereDiscriminator(discrimator: AccountDiscriminator) {\n    return this.where(0, Buffer.from(discrimator));\n  }\n\n  candyMachineAccounts() {\n    return this.whereDiscriminator(candyMachineDiscriminator);\n  }\n\n  // wallet same as solTreasury\n  candyMachineAccountsForWallet(wallet: PublicKey) {\n    return this.candyMachineAccounts().where(WALLET, wallet.toBase58());\n  }\n\n  candyMachineAccountsForAuthority(authority: PublicKey) {\n    return this.candyMachineAccounts().where(AUTHORITY, authority.toBase58());\n  }\n}\n"],"names":["candyMachineDiscriminator","AUTHORITY","length","WALLET","PublicKey","default","toBytes","byteLength","CandyMachineGpaBuilder","GpaBuilder","whereDiscriminator","discrimator","where","Buffer","from","candyMachineAccounts","candyMachineAccountsForWallet","wallet","toBase58","candyMachineAccountsForAuthority","authority"],"mappings":";;;;;;;AAaA;AACA;AACA,MAAMA,yBAA+C,GAAG,CACtD,EADsD,EAClD,GADkD,EAC7C,GAD6C,EACxC,GADwC,EACnC,EADmC,EAC/B,GAD+B,EAC1B,GAD0B,EACrB,GADqB,CAAxD,CAAA;AAIA,MAAMC,SAAS,GAAGD,yBAAyB,CAACE,MAA5C,CAAA;AACA,MAAMC,MAAM,GAAGF,SAAS,GAAGG,iBAAS,CAACC,OAAV,CAAkBC,OAAlB,EAAA,CAA4BC,UAAvD,CAAA;AAEO,MAAMC,sBAAN,SAAqCC,qBAArC,CAAgD;EACrDC,kBAAkB,CAACC,WAAD,EAAoC;IACpD,OAAO,IAAA,CAAKC,KAAL,CAAW,CAAX,EAAcC,MAAM,CAACC,IAAP,CAAYH,WAAZ,CAAd,CAAP,CAAA;AACD,GAAA;;AAEDI,EAAAA,oBAAoB,GAAG;AACrB,IAAA,OAAO,IAAKL,CAAAA,kBAAL,CAAwBV,yBAAxB,CAAP,CAAA;AACD,GAPoD;;;EAUrDgB,6BAA6B,CAACC,MAAD,EAAoB;IAC/C,OAAO,IAAA,CAAKF,oBAAL,EAAA,CAA4BH,KAA5B,CAAkCT,MAAlC,EAA0Cc,MAAM,CAACC,QAAP,EAA1C,CAAP,CAAA;AACD,GAAA;;EAEDC,gCAAgC,CAACC,SAAD,EAAuB;IACrD,OAAO,IAAA,CAAKL,oBAAL,EAAA,CAA4BH,KAA5B,CAAkCX,SAAlC,EAA6CmB,SAAS,CAACF,QAAV,EAA7C,CAAP,CAAA;AACD,GAAA;;AAhBoD;;;;"}