{"version":3,"file":"RpcError.cjs","sources":["../../../src/errors/RpcError.ts"],"sourcesContent":["import { SendTransactionError, TransactionError } from '@solana/web3.js';\nimport type { ConfirmTransactionResponse } from '@/plugins/rpcModule';\nimport {\n  MetaplexError,\n  MetaplexErrorInputWithoutSource,\n} from './MetaplexError';\n\nexport class RpcError extends MetaplexError {\n  constructor(input: MetaplexErrorInputWithoutSource) {\n    super({\n      ...input,\n      key: `rpc.${input.key}`,\n      source: 'rpc',\n    });\n  }\n}\n\nexport class FailedToSendTransactionError extends RpcError {\n  constructor(cause: Error) {\n    super({\n      cause,\n      key: 'failed_to_send_transaction',\n      title: 'Failed to Send Transaction',\n      problem: `The transaction could not be sent successfully to the network.`,\n      solution: 'Check the error below for more information.',\n      logs: (cause as SendTransactionError).logs,\n    });\n  }\n\n  public asSendTransactionError(): SendTransactionError {\n    return this.cause as SendTransactionError;\n  }\n\n  public get error() {\n    return this.asSendTransactionError().message;\n  }\n\n  public get errorLogs() {\n    return this.asSendTransactionError().logs ?? [];\n  }\n}\n\nexport class FailedToConfirmTransactionError extends RpcError {\n  constructor(cause: Error) {\n    super({\n      cause,\n      key: 'failed_to_confirm_transaction',\n      title: 'Failed to Confirm Transaction',\n      problem: `The transaction could not be confirmed.`,\n      solution: 'Check the error below for more information.',\n    });\n  }\n}\n\nexport class FailedToConfirmTransactionWithResponseError extends FailedToConfirmTransactionError {\n  public readonly response: ConfirmTransactionResponse;\n\n  constructor(response: ConfirmTransactionResponse) {\n    const getMessage = (error: TransactionError | null): string => {\n      if (!error) return 'Unknown error';\n      if (typeof error === 'string') return error;\n      try {\n        return JSON.stringify(error);\n      } catch (error) {\n        return 'Unknown error';\n      }\n    };\n\n    super(new Error(getMessage(response.value.err)));\n    this.response = response;\n  }\n\n  public get error(): TransactionError {\n    return this.response.value.err ?? 'Unknown error';\n  }\n}\n"],"names":["RpcError","MetaplexError","constructor","input","key","source","FailedToSendTransactionError","cause","title","problem","solution","logs","asSendTransactionError","error","message","errorLogs","FailedToConfirmTransactionError","FailedToConfirmTransactionWithResponseError","response","getMessage","JSON","stringify","Error","value","err"],"mappings":";;;;;;AAOO,MAAMA,QAAN,SAAuBC,2BAAvB,CAAqC;EAC1CC,WAAW,CAACC,KAAD,EAAyC;IAClD,KAAM,CAAA,EACJ,GAAGA,KADC;AAEJC,MAAAA,GAAG,EAAG,CAAA,IAAA,EAAMD,KAAK,CAACC,GAAI,CAFlB,CAAA;AAGJC,MAAAA,MAAM,EAAE,KAAA;KAHV,CAAA,CAAA;AAKD,GAAA;;AAPyC,CAAA;AAUrC,MAAMC,4BAAN,SAA2CN,QAA3C,CAAoD;EACzDE,WAAW,CAACK,KAAD,EAAe;IACxB,KAAM,CAAA;MACJA,KADI;AAEJH,MAAAA,GAAG,EAAE,4BAFD;AAGJI,MAAAA,KAAK,EAAE,4BAHH;AAIJC,MAAAA,OAAO,EAAG,CAJN,8DAAA,CAAA;AAKJC,MAAAA,QAAQ,EAAE,6CALN;MAMJC,IAAI,EAAGJ,KAAD,CAAgCI,IAAAA;KANxC,CAAA,CAAA;AAQD,GAAA;;AAEMC,EAAAA,sBAAsB,GAAyB;AACpD,IAAA,OAAO,KAAKL,KAAZ,CAAA;AACD,GAAA;;AAEe,EAAA,IAALM,KAAK,GAAG;IACjB,OAAO,IAAA,CAAKD,sBAAL,EAAA,CAA8BE,OAArC,CAAA;AACD,GAAA;;AAEmB,EAAA,IAATC,SAAS,GAAG;AAAA,IAAA,IAAA,qBAAA,CAAA;;AACrB,IAAA,OAAA,CAAA,qBAAA,GAAO,IAAKH,CAAAA,sBAAL,EAA8BD,CAAAA,IAArC,yEAA6C,EAA7C,CAAA;AACD,GAAA;;AAtBwD,CAAA;AAyBpD,MAAMK,+BAAN,SAA8ChB,QAA9C,CAAuD;EAC5DE,WAAW,CAACK,KAAD,EAAe;IACxB,KAAM,CAAA;MACJA,KADI;AAEJH,MAAAA,GAAG,EAAE,+BAFD;AAGJI,MAAAA,KAAK,EAAE,+BAHH;AAIJC,MAAAA,OAAO,EAAG,CAJN,uCAAA,CAAA;AAKJC,MAAAA,QAAQ,EAAE,6CAAA;KALZ,CAAA,CAAA;AAOD,GAAA;;AAT2D,CAAA;AAYvD,MAAMO,2CAAN,SAA0DD,+BAA1D,CAA0F;EAG/Fd,WAAW,CAACgB,QAAD,EAAuC;IAChD,MAAMC,UAAU,GAAIN,KAAD,IAA4C;AAC7D,MAAA,IAAI,CAACA,KAAL,EAAY,OAAO,eAAP,CAAA;AACZ,MAAA,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B,OAAOA,KAAP,CAAA;;MAC/B,IAAI;AACF,QAAA,OAAOO,IAAI,CAACC,SAAL,CAAeR,KAAf,CAAP,CAAA;OADF,CAEE,OAAOA,KAAP,EAAc;AACd,QAAA,OAAO,eAAP,CAAA;AACD,OAAA;KAPH,CAAA;;IAUA,KAAM,CAAA,IAAIS,KAAJ,CAAUH,UAAU,CAACD,QAAQ,CAACK,KAAT,CAAeC,GAAhB,CAApB,CAAN,CAAA,CAAA;IACA,IAAKN,CAAAA,QAAL,GAAgBA,QAAhB,CAAA;AACD,GAAA;;AAEe,EAAA,IAALL,KAAK,GAAqB;AAAA,IAAA,IAAA,qBAAA,CAAA;;AACnC,IAAA,OAAA,CAAA,qBAAA,GAAO,KAAKK,QAAL,CAAcK,KAAd,CAAoBC,GAA3B,yEAAkC,eAAlC,CAAA;AACD,GAAA;;AApB8F;;;;;;;"}