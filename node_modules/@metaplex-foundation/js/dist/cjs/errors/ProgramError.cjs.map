{"version":3,"file":"ProgramError.cjs","sources":["../../../src/errors/ProgramError.ts"],"sourcesContent":["import { Program } from '@/types';\nimport {\n  MetaplexError,\n  MetaplexErrorInputWithoutSource,\n} from './MetaplexError';\n\ntype UnderlyingProgramError = Error & { code?: number; logs?: string[] };\n\nexport class ProgramError extends MetaplexError {\n  public program: Program;\n\n  constructor(program: Program, input: MetaplexErrorInputWithoutSource) {\n    super({\n      ...input,\n      key: `program.${input.key}`,\n      title: `${program.name} > ${input.title}`,\n      source: 'program',\n      sourceDetails: `${program.name} [${program.address.toBase58()}]`,\n    });\n    this.program = program;\n  }\n}\n\nexport class ParsedProgramError extends ProgramError {\n  constructor(program: Program, cause: UnderlyingProgramError) {\n    const ofCode = cause.code ? ` of code [${cause.code}]` : '';\n    super(program, {\n      cause,\n      key: 'parsed_program_error',\n      title: cause.message,\n      problem:\n        `The program [${\n          program.name\n        }] at address [${program.address.toBase58()}] ` +\n        `raised an error${ofCode} that translates to \"${cause.message}\".`,\n      solution: 'Check the error message provided by the program.',\n      logs: cause.logs,\n    });\n  }\n}\n\nexport class UnknownProgramError extends ProgramError {\n  constructor(program: Program, cause: UnderlyingProgramError) {\n    const ofCode = cause.code ? ` of code [${cause.code}]` : '';\n    super(program, {\n      cause,\n      key: 'unknown_program_error',\n      title: 'Unknown Program Error',\n      problem:\n        `The program [${\n          program.name\n        }] at address [${program.address.toBase58()}] ` +\n        `raised an error${ofCode} that is not recognized by the programs registered by the SDK.`,\n      solution:\n        'Unfortunately, you will need to check the unparsed ' +\n        'error below to investigate what went wrong. ' +\n        'To get more helpful error messages, ensure the program that failed is ' +\n        'registered by the SDK and provides an \"errorResolver\" method.',\n      logs: cause.logs,\n    });\n  }\n}\n"],"names":["ProgramError","MetaplexError","constructor","program","input","key","title","name","source","sourceDetails","address","toBase58","ParsedProgramError","cause","ofCode","code","message","problem","solution","logs","UnknownProgramError"],"mappings":";;;;;;AAQO,MAAMA,YAAN,SAA2BC,2BAA3B,CAAyC;AAG9CC,EAAAA,WAAW,CAACC,OAAD,EAAmBC,KAAnB,EAA2D;IACpE,KAAM,CAAA,EACJ,GAAGA,KADC;AAEJC,MAAAA,GAAG,EAAG,CAAA,QAAA,EAAUD,KAAK,CAACC,GAAI,CAFtB,CAAA;MAGJC,KAAK,EAAG,GAAEH,OAAO,CAACI,IAAK,CAAKH,GAAAA,EAAAA,KAAK,CAACE,KAAM,CAHpC,CAAA;AAIJE,MAAAA,MAAM,EAAE,SAJJ;MAKJC,aAAa,EAAG,CAAEN,EAAAA,OAAO,CAACI,IAAK,CAAIJ,EAAAA,EAAAA,OAAO,CAACO,OAAR,CAAgBC,QAAhB,EAA2B,CAAA,CAAA,CAAA;KALhE,CAAA,CAAA;IAOA,IAAKR,CAAAA,OAAL,GAAeA,OAAf,CAAA;AACD,GAAA;;AAZ6C,CAAA;AAezC,MAAMS,kBAAN,SAAiCZ,YAAjC,CAA8C;AACnDE,EAAAA,WAAW,CAACC,OAAD,EAAmBU,KAAnB,EAAkD;AAC3D,IAAA,MAAMC,MAAM,GAAGD,KAAK,CAACE,IAAN,GAAc,CAAYF,UAAAA,EAAAA,KAAK,CAACE,IAAK,CAArC,CAAA,CAAA,GAA0C,EAAzD,CAAA;AACA,IAAA,KAAA,CAAMZ,OAAN,EAAe;MACbU,KADa;AAEbR,MAAAA,GAAG,EAAE,sBAFQ;MAGbC,KAAK,EAAEO,KAAK,CAACG,OAHA;MAIbC,OAAO,EACJ,gBACCd,OAAO,CAACI,IACT,CAAgBJ,cAAAA,EAAAA,OAAO,CAACO,OAAR,CAAgBC,QAAhB,EAA2B,CAAA,EAAA,CAF5C,GAGC,CAAiBG,eAAAA,EAAAA,MAAO,wBAAuBD,KAAK,CAACG,OAAQ,CARnD,EAAA,CAAA;AASbE,MAAAA,QAAQ,EAAE,kDATG;MAUbC,IAAI,EAAEN,KAAK,CAACM,IAAAA;KAVd,CAAA,CAAA;AAYD,GAAA;;AAfkD,CAAA;AAkB9C,MAAMC,mBAAN,SAAkCpB,YAAlC,CAA+C;AACpDE,EAAAA,WAAW,CAACC,OAAD,EAAmBU,KAAnB,EAAkD;AAC3D,IAAA,MAAMC,MAAM,GAAGD,KAAK,CAACE,IAAN,GAAc,CAAYF,UAAAA,EAAAA,KAAK,CAACE,IAAK,CAArC,CAAA,CAAA,GAA0C,EAAzD,CAAA;AACA,IAAA,KAAA,CAAMZ,OAAN,EAAe;MACbU,KADa;AAEbR,MAAAA,GAAG,EAAE,uBAFQ;AAGbC,MAAAA,KAAK,EAAE,uBAHM;AAIbW,MAAAA,OAAO,EACJ,CACCd,aAAAA,EAAAA,OAAO,CAACI,IACT,iBAAgBJ,OAAO,CAACO,OAAR,CAAgBC,QAAhB,EAA2B,CAAA,EAAA,CAF5C,GAGC,CAAA,eAAA,EAAiBG,MAAO,CARd,8DAAA,CAAA;AASbI,MAAAA,QAAQ,EACN,qDACA,GAAA,8CADA,GAEA,wEAFA,GAGA,+DAbW;MAcbC,IAAI,EAAEN,KAAK,CAACM,IAAAA;KAdd,CAAA,CAAA;AAgBD,GAAA;;AAnBmD;;;;;;"}