{"version":3,"file":"WalletAdapterIdentityDriver.mjs","sources":["../../../../src/plugins/walletAdapterIdentity/WalletAdapterIdentityDriver.ts"],"sourcesContent":["import { PublicKey, Transaction } from '@solana/web3.js';\nimport {\n  OperationNotSupportedByWalletAdapterError,\n  UninitializedWalletAdapterError,\n} from '@/errors';\nimport { IdentityDriver } from '../identityModule';\n\nexport type WalletAdapter = {\n  publicKey: PublicKey | null;\n  signMessage?: (message: Uint8Array) => Promise<Uint8Array>;\n  signTransaction?: (transaction: Transaction) => Promise<Transaction>;\n  signAllTransactions?: (transactions: Transaction[]) => Promise<Transaction[]>;\n};\n\nexport class WalletAdapterIdentityDriver implements IdentityDriver {\n  public readonly walletAdapter: WalletAdapter;\n\n  constructor(walletAdapter: WalletAdapter) {\n    this.walletAdapter = walletAdapter;\n  }\n\n  get publicKey(): PublicKey {\n    if (!this.walletAdapter.publicKey) {\n      throw new UninitializedWalletAdapterError();\n    }\n\n    return this.walletAdapter.publicKey;\n  }\n\n  public async signMessage(message: Uint8Array): Promise<Uint8Array> {\n    if (this.walletAdapter.signMessage === undefined) {\n      throw new OperationNotSupportedByWalletAdapterError('signMessage');\n    }\n\n    return this.walletAdapter.signMessage(message);\n  }\n\n  public async signTransaction(transaction: Transaction): Promise<Transaction> {\n    if (this.walletAdapter.signTransaction === undefined) {\n      throw new OperationNotSupportedByWalletAdapterError('signTransaction');\n    }\n\n    return this.walletAdapter.signTransaction(transaction);\n  }\n\n  public async signAllTransactions(\n    transactions: Transaction[]\n  ): Promise<Transaction[]> {\n    if (this.walletAdapter.signAllTransactions === undefined) {\n      throw new OperationNotSupportedByWalletAdapterError(\n        'signAllTransactions'\n      );\n    }\n\n    return this.walletAdapter.signAllTransactions(transactions);\n  }\n}\n"],"names":["WalletAdapterIdentityDriver","constructor","walletAdapter","publicKey","UninitializedWalletAdapterError","signMessage","message","undefined","OperationNotSupportedByWalletAdapterError","signTransaction","transaction","signAllTransactions","transactions"],"mappings":";;AAcO,MAAMA,2BAAN,CAA4D;EAGjEC,WAAW,CAACC,aAAD,EAA+B;IACxC,IAAKA,CAAAA,aAAL,GAAqBA,aAArB,CAAA;AACD,GAAA;;AAEY,EAAA,IAATC,SAAS,GAAc;AACzB,IAAA,IAAI,CAAC,IAAA,CAAKD,aAAL,CAAmBC,SAAxB,EAAmC;MACjC,MAAM,IAAIC,+BAAJ,EAAN,CAAA;AACD,KAAA;;IAED,OAAO,IAAA,CAAKF,aAAL,CAAmBC,SAA1B,CAAA;AACD,GAAA;;EAEuB,MAAXE,WAAW,CAACC,OAAD,EAA2C;AACjE,IAAA,IAAI,KAAKJ,aAAL,CAAmBG,WAAnB,KAAmCE,SAAvC,EAAkD;AAChD,MAAA,MAAM,IAAIC,yCAAJ,CAA8C,aAA9C,CAAN,CAAA;AACD,KAAA;;AAED,IAAA,OAAO,KAAKN,aAAL,CAAmBG,WAAnB,CAA+BC,OAA/B,CAAP,CAAA;AACD,GAAA;;EAE2B,MAAfG,eAAe,CAACC,WAAD,EAAiD;AAC3E,IAAA,IAAI,KAAKR,aAAL,CAAmBO,eAAnB,KAAuCF,SAA3C,EAAsD;AACpD,MAAA,MAAM,IAAIC,yCAAJ,CAA8C,iBAA9C,CAAN,CAAA;AACD,KAAA;;AAED,IAAA,OAAO,KAAKN,aAAL,CAAmBO,eAAnB,CAAmCC,WAAnC,CAAP,CAAA;AACD,GAAA;;EAE+B,MAAnBC,mBAAmB,CAC9BC,YAD8B,EAEN;AACxB,IAAA,IAAI,KAAKV,aAAL,CAAmBS,mBAAnB,KAA2CJ,SAA/C,EAA0D;AACxD,MAAA,MAAM,IAAIC,yCAAJ,CACJ,qBADI,CAAN,CAAA;AAGD,KAAA;;AAED,IAAA,OAAO,KAAKN,aAAL,CAAmBS,mBAAnB,CAAuCC,YAAvC,CAAP,CAAA;AACD,GAAA;;AAzCgE;;;;"}