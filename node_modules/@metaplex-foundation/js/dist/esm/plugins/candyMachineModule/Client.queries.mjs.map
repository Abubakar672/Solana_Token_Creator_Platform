{"version":3,"file":"Client.queries.mjs","sources":["../../../../src/plugins/candyMachineModule/Client.queries.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport type { CandyMachineClient } from './CandyMachineClient';\nimport { findCandyMachineByAdddressOperation } from './findCandyMachineByAddress';\nimport { findCandyMachinesByPublicKeyFieldOperation } from './findCandyMachinesByPublicKeyField';\nimport { CandyMachine } from './CandyMachine';\nimport {\n  CandyMachinesNotFoundByAuthorityError,\n  MoreThanOneCandyMachineFoundByAuthorityAndUuidError,\n  NoCandyMachineFoundForAuthorityMatchesUuidError,\n} from '../../errors/CandyMachineError';\n\nexport function findByAddress(\n  this: CandyMachineClient,\n  address: PublicKey\n): Promise<CandyMachine | null> {\n  const operation = findCandyMachineByAdddressOperation(address);\n  return this.metaplex.operations().execute(operation);\n}\n\nexport function findAllByWallet(\n  this: CandyMachineClient,\n  walletAddress: PublicKey\n): Promise<CandyMachine[]> {\n  return this.metaplex.operations().execute(\n    findCandyMachinesByPublicKeyFieldOperation({\n      type: 'wallet',\n      publicKey: walletAddress,\n    })\n  );\n}\n\nexport function findAllByAuthority(\n  this: CandyMachineClient,\n  authorityAddress: PublicKey\n): Promise<CandyMachine[]> {\n  return this.metaplex.operations().execute(\n    findCandyMachinesByPublicKeyFieldOperation({\n      type: 'authority',\n      publicKey: authorityAddress,\n    })\n  );\n}\n\nexport async function findByAuthorityAndUuid(\n  this: CandyMachineClient,\n  authorityAddress: PublicKey,\n  uuid: string\n): Promise<CandyMachine> {\n  const candyMachinesForAuthority = await this.findAllByAuthority(\n    authorityAddress\n  );\n  if (candyMachinesForAuthority.length === 0) {\n    throw new CandyMachinesNotFoundByAuthorityError(authorityAddress);\n  }\n  const matchingUUid = candyMachinesForAuthority.filter(\n    (candyMachine) => candyMachine.uuid === uuid\n  );\n  if (matchingUUid.length === 0) {\n    const addresses = candyMachinesForAuthority.map(\n      (candyMachine) => candyMachine.candyMachineAccount.publicKey\n    );\n    throw new NoCandyMachineFoundForAuthorityMatchesUuidError(\n      authorityAddress,\n      uuid,\n      addresses\n    );\n  }\n  if (matchingUUid.length > 1) {\n    const addresses = matchingUUid.map(\n      (candyMachine) => candyMachine.candyMachineAccount.publicKey\n    );\n    throw new MoreThanOneCandyMachineFoundByAuthorityAndUuidError(\n      authorityAddress,\n      uuid,\n      addresses\n    );\n  }\n  return matchingUUid[0];\n}\n"],"names":["findByAddress","address","operation","findCandyMachineByAdddressOperation","metaplex","operations","execute","findAllByWallet","walletAddress","findCandyMachinesByPublicKeyFieldOperation","type","publicKey","findAllByAuthority","authorityAddress","findByAuthorityAndUuid","uuid","candyMachinesForAuthority","length","CandyMachinesNotFoundByAuthorityError","matchingUUid","filter","candyMachine","addresses","map","candyMachineAccount","NoCandyMachineFoundForAuthorityMatchesUuidError","MoreThanOneCandyMachineFoundByAuthorityAndUuidError"],"mappings":";;;;AAWO,SAASA,aAAT,CAELC,OAFK,EAGyB;AAC9B,EAAA,MAAMC,SAAS,GAAGC,mCAAmC,CAACF,OAAD,CAArD,CAAA;EACA,OAAO,IAAA,CAAKG,QAAL,CAAcC,UAAd,GAA2BC,OAA3B,CAAmCJ,SAAnC,CAAP,CAAA;AACD,CAAA;AAEM,SAASK,eAAT,CAELC,aAFK,EAGoB;EACzB,OAAO,IAAA,CAAKJ,QAAL,CAAcC,UAAd,GAA2BC,OAA3B,CACLG,0CAA0C,CAAC;AACzCC,IAAAA,IAAI,EAAE,QADmC;AAEzCC,IAAAA,SAAS,EAAEH,aAAAA;AAF8B,GAAD,CADrC,CAAP,CAAA;AAMD,CAAA;AAEM,SAASI,kBAAT,CAELC,gBAFK,EAGoB;EACzB,OAAO,IAAA,CAAKT,QAAL,CAAcC,UAAd,GAA2BC,OAA3B,CACLG,0CAA0C,CAAC;AACzCC,IAAAA,IAAI,EAAE,WADmC;AAEzCC,IAAAA,SAAS,EAAEE,gBAAAA;AAF8B,GAAD,CADrC,CAAP,CAAA;AAMD,CAAA;AAEM,eAAeC,sBAAf,CAELD,gBAFK,EAGLE,IAHK,EAIkB;AACvB,EAAA,MAAMC,yBAAyB,GAAG,MAAM,KAAKJ,kBAAL,CACtCC,gBADsC,CAAxC,CAAA;;AAGA,EAAA,IAAIG,yBAAyB,CAACC,MAA1B,KAAqC,CAAzC,EAA4C;AAC1C,IAAA,MAAM,IAAIC,qCAAJ,CAA0CL,gBAA1C,CAAN,CAAA;AACD,GAAA;;AACD,EAAA,MAAMM,YAAY,GAAGH,yBAAyB,CAACI,MAA1B,CAClBC,YAAD,IAAkBA,YAAY,CAACN,IAAb,KAAsBA,IADrB,CAArB,CAAA;;AAGA,EAAA,IAAII,YAAY,CAACF,MAAb,KAAwB,CAA5B,EAA+B;AAC7B,IAAA,MAAMK,SAAS,GAAGN,yBAAyB,CAACO,GAA1B,CACfF,YAAD,IAAkBA,YAAY,CAACG,mBAAb,CAAiCb,SADnC,CAAlB,CAAA;IAGA,MAAM,IAAIc,+CAAJ,CACJZ,gBADI,EAEJE,IAFI,EAGJO,SAHI,CAAN,CAAA;AAKD,GAAA;;AACD,EAAA,IAAIH,YAAY,CAACF,MAAb,GAAsB,CAA1B,EAA6B;AAC3B,IAAA,MAAMK,SAAS,GAAGH,YAAY,CAACI,GAAb,CACfF,YAAD,IAAkBA,YAAY,CAACG,mBAAb,CAAiCb,SADnC,CAAlB,CAAA;IAGA,MAAM,IAAIe,mDAAJ,CACJb,gBADI,EAEJE,IAFI,EAGJO,SAHI,CAAN,CAAA;AAKD,GAAA;;EACD,OAAOH,YAAY,CAAC,CAAD,CAAnB,CAAA;AACD;;;;"}