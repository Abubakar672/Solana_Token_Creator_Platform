{"version":3,"file":"MetaplexError.mjs","sources":["../../../src/errors/MetaplexError.ts"],"sourcesContent":["export type MetaplexErrorSource =\n  | 'sdk'\n  | 'network'\n  | 'rpc'\n  | 'plugin'\n  | 'program';\n\nexport type MetaplexErrorInput = {\n  key: string;\n  title: string;\n  problem: string;\n  solution: string;\n  source: MetaplexErrorSource;\n  sourceDetails?: string;\n  cause?: Error;\n  logs?: string[];\n};\n\nexport type MetaplexErrorInputWithoutSource = Omit<\n  MetaplexErrorInput,\n  'source' | 'sourceDetails'\n>;\n\nexport class MetaplexError extends Error {\n  readonly name: 'MetaplexError' = 'MetaplexError';\n  readonly key: string;\n  readonly title: string;\n  readonly problem: string;\n  readonly solution: string;\n  readonly source: MetaplexErrorSource;\n  readonly sourceDetails?: string;\n  readonly cause?: Error;\n  readonly logs?: string[];\n\n  constructor(input: MetaplexErrorInput) {\n    super(input.problem);\n    this.key = `metaplex.errors.${input.key}`;\n    this.title = input.title;\n    this.problem = input.problem;\n    this.solution = input.solution;\n    this.source = input.source;\n    this.sourceDetails = input.sourceDetails;\n    this.cause = input.cause;\n    this.logs = input.logs;\n    this.message = this.toString(false);\n  }\n\n  getCapitalizedSource(): string {\n    if (this.source === 'sdk' || this.source === 'rpc') {\n      return this.source.toUpperCase();\n    }\n\n    return this.source[0].toUpperCase() + this.source.slice(1);\n  }\n\n  getFullSource(): string {\n    const capitalizedSource = this.getCapitalizedSource();\n    const sourceDetails = this.sourceDetails ? ` > ${this.sourceDetails}` : '';\n\n    return capitalizedSource + sourceDetails;\n  }\n\n  toString(withName: boolean = true) {\n    const logs =\n      this.logs != null ? `\\n\\n[ Logs: ${this.logs.join(' |$> ')} ]` : '';\n    const causedBy = this.cause ? `\\n\\nCaused By: ${this.cause}` : '';\n\n    return (\n      (withName ? `[${this.name}] ` : '') +\n      `${this.title}` +\n      `\\n>> Source: ${this.getFullSource()}` +\n      `\\n>> Problem: ${this.problem}` +\n      `\\n>> Solution: ${this.solution}` +\n      causedBy +\n      logs +\n      '\\n'\n    );\n  }\n}\n"],"names":["MetaplexError","Error","constructor","input","problem","key","title","solution","source","sourceDetails","cause","logs","message","toString","getCapitalizedSource","toUpperCase","slice","getFullSource","capitalizedSource","withName","join","causedBy","name"],"mappings":";;AAuBO,MAAMA,aAAN,SAA4BC,KAA5B,CAAkC;EAWvCC,WAAW,CAACC,KAAD,EAA4B;IACrC,KAAMA,CAAAA,KAAK,CAACC,OAAZ,CAAA,CAAA;;AADqC,IAAA,eAAA,CAAA,IAAA,EAAA,MAAA,EAVN,eAUM,CAAA,CAAA;;AAErC,IAAA,IAAA,CAAKC,GAAL,GAAY,CAAA,gBAAA,EAAkBF,KAAK,CAACE,GAAI,CAAxC,CAAA,CAAA;AACA,IAAA,IAAA,CAAKC,KAAL,GAAaH,KAAK,CAACG,KAAnB,CAAA;AACA,IAAA,IAAA,CAAKF,OAAL,GAAeD,KAAK,CAACC,OAArB,CAAA;AACA,IAAA,IAAA,CAAKG,QAAL,GAAgBJ,KAAK,CAACI,QAAtB,CAAA;AACA,IAAA,IAAA,CAAKC,MAAL,GAAcL,KAAK,CAACK,MAApB,CAAA;AACA,IAAA,IAAA,CAAKC,aAAL,GAAqBN,KAAK,CAACM,aAA3B,CAAA;AACA,IAAA,IAAA,CAAKC,KAAL,GAAaP,KAAK,CAACO,KAAnB,CAAA;AACA,IAAA,IAAA,CAAKC,IAAL,GAAYR,KAAK,CAACQ,IAAlB,CAAA;AACA,IAAA,IAAA,CAAKC,OAAL,GAAe,IAAA,CAAKC,QAAL,CAAc,KAAd,CAAf,CAAA;AACD,GAAA;;AAEDC,EAAAA,oBAAoB,GAAW;IAC7B,IAAI,IAAA,CAAKN,MAAL,KAAgB,KAAhB,IAAyB,IAAKA,CAAAA,MAAL,KAAgB,KAA7C,EAAoD;AAClD,MAAA,OAAO,IAAKA,CAAAA,MAAL,CAAYO,WAAZ,EAAP,CAAA;AACD,KAAA;;AAED,IAAA,OAAO,IAAKP,CAAAA,MAAL,CAAY,CAAZ,CAAeO,CAAAA,WAAf,EAA+B,GAAA,IAAA,CAAKP,MAAL,CAAYQ,KAAZ,CAAkB,CAAlB,CAAtC,CAAA;AACD,GAAA;;AAEDC,EAAAA,aAAa,GAAW;AACtB,IAAA,MAAMC,iBAAiB,GAAG,IAAKJ,CAAAA,oBAAL,EAA1B,CAAA;IACA,MAAML,aAAa,GAAG,IAAA,CAAKA,aAAL,GAAsB,MAAK,IAAKA,CAAAA,aAAc,CAA9C,CAAA,GAAkD,EAAxE,CAAA;IAEA,OAAOS,iBAAiB,GAAGT,aAA3B,CAAA;AACD,GAAA;;AAEDI,EAAAA,QAAQ,CAACM,QAAiB,GAAG,IAArB,EAA2B;AACjC,IAAA,MAAMR,IAAI,GACR,IAAA,CAAKA,IAAL,IAAa,IAAb,GAAqB,CAAA,YAAA,EAAc,IAAKA,CAAAA,IAAL,CAAUS,IAAV,CAAe,OAAf,CAAwB,CAAA,EAAA,CAA3D,GAAiE,EADnE,CAAA;IAEA,MAAMC,QAAQ,GAAG,IAAA,CAAKX,KAAL,GAAc,kBAAiB,IAAKA,CAAAA,KAAM,CAA1C,CAAA,GAA8C,EAA/D,CAAA;AAEA,IAAA,OACE,CAACS,QAAQ,GAAI,CAAA,CAAA,EAAG,KAAKG,IAAK,CAAA,EAAA,CAAjB,GAAuB,EAAhC,IACC,CAAE,EAAA,IAAA,CAAKhB,KAAM,CAAA,CADd,GAEC,CAAe,aAAA,EAAA,IAAA,CAAKW,aAAL,EAAqB,EAFrC,GAGC,CAAA,cAAA,EAAgB,IAAKb,CAAAA,OAAQ,EAH9B,GAIC,CAAA,eAAA,EAAiB,IAAKG,CAAAA,QAAS,EAJhC,GAKAc,QALA,GAMAV,IANA,GAOA,IARF,CAAA;AAUD,GAAA;;AAtDsC;;;;"}