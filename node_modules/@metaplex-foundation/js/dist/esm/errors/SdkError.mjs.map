{"version":3,"file":"SdkError.mjs","sources":["../../../src/errors/SdkError.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { Cluster, Program, Currency } from '@/types';\nimport {\n  MetaplexError,\n  MetaplexErrorInputWithoutSource,\n} from './MetaplexError';\n\nexport class SdkError extends MetaplexError {\n  constructor(input: MetaplexErrorInputWithoutSource) {\n    super({\n      ...input,\n      key: `sdk.${input.key}`,\n      source: 'sdk',\n    });\n  }\n}\n\nexport class OperationHandlerMissingError extends SdkError {\n  constructor(operationKey: string, cause?: Error) {\n    super({\n      cause,\n      key: 'operation_handler_missing',\n      title: 'Operation Handler Missing',\n      problem: `No operation handler was registered for the [${operationKey}] operation.`,\n      solution:\n        'Did you forget to register it? You may do this by using: ' +\n        '\"metaplex.register(operation, operationHandler)\".',\n    });\n  }\n}\n\nexport class DriverNotProvidedError extends SdkError {\n  constructor(driver: string, cause?: Error) {\n    super({\n      cause,\n      key: 'driver_not_provided',\n      title: 'Driver Not Provided',\n      problem: `The SDK tried to access the driver [${driver}] but was not provided.`,\n      solution:\n        'Make sure the driver is registered by using the \"setDriver(myDriver)\" method.',\n    });\n  }\n}\n\nexport class UnexpectedCurrencyError extends SdkError {\n  actual: Currency;\n  expected: Currency;\n  constructor(actual: Currency, expected: Currency, cause?: Error) {\n    super({\n      cause,\n      key: 'unexpected_currency',\n      title: 'Unexpected Currency',\n      problem: `Expected currency [${expected}] but got [${actual}].`,\n      solution:\n        'Ensure the provided Amount or Currency is of the expected type.',\n    });\n    this.actual = actual;\n    this.expected = expected;\n  }\n}\n\nexport class CurrencyMismatchError extends SdkError {\n  left: Currency;\n  right: Currency;\n  operation?: string;\n  constructor(\n    left: Currency,\n    right: Currency,\n    operation?: string,\n    cause?: Error\n  ) {\n    const wrappedOperation = operation ? ` [${operation}]` : '';\n    super({\n      cause,\n      key: 'currency_mismatch',\n      title: 'Currency Mismatch',\n      problem:\n        `The SDK tried to execute an operation${wrappedOperation} on two different currencies: ` +\n        `${left.symbol} and ${right.symbol}.`,\n      solution:\n        'Provide both amounts in the same currency to perform this operation.',\n    });\n    this.left = left;\n    this.right = right;\n    this.operation = operation;\n  }\n}\n\nexport class InvalidJsonVariableError extends SdkError {\n  constructor(cause?: Error) {\n    super({\n      cause,\n      key: 'invalid_json_variable',\n      title: 'Invalid JSON Variable',\n      problem: 'The provided JSON variable could not be parsed into a string.',\n      solution:\n        'Ensure the variable can be parsed as a JSON string using \"JSON.stringify(myVariable)\".',\n    });\n  }\n}\n\nexport class InvalidJsonStringError extends SdkError {\n  constructor(cause?: Error) {\n    super({\n      cause,\n      key: 'invalid_json_string',\n      title: 'Invalid JSON String',\n      problem: 'The provided string could not be parsed into a JSON variable.',\n      solution: 'Ensure the provided string uses a valid JSON syntax.',\n    });\n  }\n}\n\nexport class OperationUnauthorizedForGuestsError extends SdkError {\n  constructor(operation: string, cause?: Error) {\n    super({\n      cause,\n      key: 'operation_unauthorized_for_guests',\n      title: 'Operation Unauthorized For Guests',\n      problem: `Trying to access the [${operation}] operation as a guest.`,\n      solution:\n        'Ensure your wallet is connected using the identity driver. ' +\n        'For instance, by using \"metaplex.use(walletAdapterIdentity(wallet))\" or ' +\n        '\"metaplex.use(keypairIdentity(keypair))\".',\n    });\n  }\n}\n\nexport class UninitializedWalletAdapterError extends SdkError {\n  constructor(cause?: Error) {\n    super({\n      cause,\n      key: 'uninitialized_wallet_adapter',\n      title: 'Uninitialized Wallet Adapter',\n      problem: 'The current wallet adapter is not initialized.',\n      solution:\n        'You likely have selected a wallet adapter but forgot to initialize it. ' +\n        'You may do this by running the following asynchronous method: \"walletAdater.connect();\".',\n    });\n  }\n}\n\nexport class OperationNotSupportedByWalletAdapterError extends SdkError {\n  constructor(operation: string, cause?: Error) {\n    super({\n      cause,\n      key: 'operation_not_supported_by_wallet_adapter',\n      title: 'Operation Not Supported By Wallet Adapter',\n      problem: `The current wallet adapter does not support the following operation: [${operation}].`,\n      solution:\n        'Ensure your wallet is connected using a compatible wallet adapter.',\n    });\n  }\n}\n\nexport class TaskIsAlreadyRunningError extends SdkError {\n  constructor(cause?: Error) {\n    super({\n      cause,\n      key: 'task_is_already_running',\n      title: 'Task Is Already Running',\n      problem: \"Trying to re-run a task that hasn't completed yet.\",\n      solution:\n        'Ensure the task has completed using \"await\" before trying to run it again.',\n    });\n  }\n}\n\nexport class AssetNotFoundError extends SdkError {\n  constructor(location: string, cause?: Error) {\n    super({\n      cause,\n      key: 'asset_not_found',\n      title: 'Asset Not Found',\n      problem: `The asset at [${location}] could not be found.`,\n      solution: 'Ensure the asset exists at the given path or URI.',\n    });\n  }\n}\n\nexport class AccountNotFoundError extends SdkError {\n  constructor(\n    address: PublicKey,\n    accountType?: string,\n    solution?: string,\n    cause?: Error\n  ) {\n    super({\n      cause,\n      key: 'account_not_found',\n      title: 'Account Not Found',\n      problem:\n        (accountType\n          ? `The account of type [${accountType}] was not found`\n          : 'No account was found') +\n        ` at the provided address [${address.toBase58()}].`,\n      solution:\n        solution ??\n        'Ensure the provided address is correct and that an account exists at this address.',\n    });\n  }\n}\n\nexport class UnexpectedAccountError extends SdkError {\n  constructor(address: PublicKey, accountType: string, cause?: Error) {\n    super({\n      cause,\n      key: 'unexpected_account',\n      title: 'Unexpected Account',\n      problem:\n        `The account at the provided address [${address.toBase58()}] ` +\n        `is not of the expected type [${accountType}].`,\n      solution: `Ensure the provided address is correct and that it holds an account of type [${accountType}].`,\n    });\n  }\n}\n\nexport class ProgramNotRecognizedError extends SdkError {\n  nameOrAddress: string | PublicKey;\n  cluster: Cluster;\n  constructor(\n    nameOrAddress: string | PublicKey,\n    cluster: Cluster,\n    cause?: Error\n  ) {\n    const isName = typeof nameOrAddress === 'string';\n    const toString = isName ? nameOrAddress : nameOrAddress.toBase58();\n    super({\n      cause,\n      key: 'program_not_recognized',\n      title: 'Program Not Recognized',\n      problem:\n        `The provided program ${isName ? 'name' : 'address'} [${toString}] ` +\n        `is not recognized in the [${cluster}] cluster.`,\n      solution:\n        'Did you forget to register this program? ' +\n        'If so, you may use \"metaplex.programs().register(myProgram)\" to fix this.',\n    });\n    this.nameOrAddress = nameOrAddress;\n    this.cluster = cluster;\n  }\n}\n\nexport class MissingGpaBuilderError extends SdkError {\n  program: Program;\n  constructor(program: Program, cause?: Error) {\n    super({\n      cause,\n      key: 'missing_gpa_builder',\n      title: 'Missing \"getProgramAccount\" Builder',\n      problem: `The program [${program.name}] does not have a registered \"getProgramAccount\" builder.`,\n      solution:\n        'When registering a program, make sure you provide a \"gpaResolver\" ' +\n        'before trying to access its \"getProgramAccount\" builder.',\n    });\n    this.program = program;\n  }\n}\n\nexport class NotYetImplementedError extends SdkError {\n  constructor(cause?: Error) {\n    super({\n      cause,\n      key: 'not_yet_implemented',\n      title: 'Not Yet Implemented',\n      problem: 'This feature is not yet implemented.',\n      solution: 'Please check back later.',\n    });\n  }\n}\n\nexport class UnreachableCaseError extends SdkError {\n  constructor(value: never, cause?: Error) {\n    super({\n      cause,\n      key: 'unreachable_case',\n      title: `The Case '${value}' in a Switch or If Statement went Unhandled.`,\n      problem:\n        'The developer is not handling that case yet or is missing a `break` or `return` statement.',\n      solution:\n        'Check your inputs or file an issue to have all cases handled properly.',\n    });\n  }\n}\n"],"names":["SdkError","MetaplexError","constructor","input","key","source","OperationHandlerMissingError","operationKey","cause","title","problem","solution","DriverNotProvidedError","driver","UnexpectedCurrencyError","actual","expected","CurrencyMismatchError","left","right","operation","wrappedOperation","symbol","InvalidJsonVariableError","InvalidJsonStringError","OperationUnauthorizedForGuestsError","UninitializedWalletAdapterError","OperationNotSupportedByWalletAdapterError","TaskIsAlreadyRunningError","AssetNotFoundError","location","AccountNotFoundError","address","accountType","toBase58","UnexpectedAccountError","ProgramNotRecognizedError","nameOrAddress","cluster","isName","toString","MissingGpaBuilderError","program","name","NotYetImplementedError","UnreachableCaseError","value"],"mappings":"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"}